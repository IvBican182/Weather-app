(()=>{"use strict";function e(e){const t=document.getElementById("temp-div"),n=document.getElementById("humidity-div"),a=document.getElementById("wind-div"),r=document.getElementById("weather-info"),o=document.getElementById("weather-icon"),c=document.getElementById("hourly-forecast");if(r.innerHTML="",c.innerHTML="",t.innerHTML="","404"===e.cod)r.innerHTML=`<p>${e.message}</p>`;else{const c=e.name,i=Math.round(e.main.temp-273.15),s=e.main.humidity,d=(3600*e.wind.speed/1e3).toFixed(1),h=e.weather[0].description,p=`https://openweathermap.org/img/wn/${e.weather[0].icon}@4x.png`,l=`\n            <p>${i}°C</p>\n        `,g=`\n            <p>Humidity: ${s}%</p>\n        `,m=`\n            <p>Wind: ${d}Km/h</p>\n        `,u=`\n            <p>${c}</p>\n            <p>${h}</p>\n        `;t.innerHTML=l,n.innerHTML=g,a.innerHTML=m,r.innerHTML=u,o.src=p,o.alt=h,document.getElementById("weather-icon").style.display="block"}}function t(e){const t=document.getElementById("hourly-forecast");e.slice(0,8).forEach((e=>{const n=new Date(1e3*e.dt).getHours(),a=Math.round(e.main.temp-273.15),r=`\n            <div class="hourly-item">\n                <span>${n}:00</span>\n                <img src="https://openweathermap.org/img/wn/${e.weather[0].icon}.png" alt="Hourly Weather Icon">\n                <span>${a}°C</span>\n            </div>\n        `;t.innerHTML+=r}))}function n(e){const t=document.getElementById("days-forecast"),n=e;n.forEach((e=>{const a=new Date(e.dt_txt),r=a.getDate(),o=a.getHours(),c=Math.round(e.main.temp-273.15),i=`\n            <div class="days-item">\n                <span>${r}</span>\n                <span>${o}:00</span>\n                <img src="https://openweathermap.org/img/wn/${e.weather[0].icon}.png" alt="Daily Weather Icon">\n                <span>${c}°C</span>\n            </div>\n        `;t.innerHTML+=i,console.log(n)}))}document.getElementById("search-btn").addEventListener("click",(function(){const a=document.getElementById("city").value;if(!a)return void alert("Please enter a city");const r="4e892c19e0b10a90b88b86a8fcfb060e",o=`https://api.openweathermap.org/data/2.5/forecast?q=${a}&appid=${r}`;fetch(`https://api.openweathermap.org/data/2.5/weather?q=${a}&appid=${r}`).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{console.error("Error fetching current weather data:",e),alert("Error fetching current weather data. Please try again.")})),fetch(o).then((e=>e.json())).then((e=>{t(e.list),n(e.list)})).catch((e=>{console.error("Error fetching hourly forecast data:",e),alert("Error fetching hourly forecast data. Please try again.")}))})),document.getElementById("location-btn").addEventListener("click",(function(){const a="4e892c19e0b10a90b88b86a8fcfb060e";navigator.geolocation.getCurrentPosition((r=>{const{latitude:o,longitude:c}=r.coords;fetch(`http://api.openweathermap.org/geo/1.0/reverse?lat=${o}&lon=${c}&limit=1&appid=${a}`).then((e=>e.json())).then((r=>{const o=r[0].name.toLowerCase();console.log(o.toString());const c=o.toString(),i=`https://api.openweathermap.org/data/2.5/forecast?q=${c}&appid=${a}`;fetch(`https://api.openweathermap.org/data/2.5/weather?q=${c}&appid=${a}`).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{console.error("Error fetching current weather data:",e),alert("Error fetching current weather data. Please try again.")})),fetch(i).then((e=>e.json())).then((e=>{t(e.list),n(e.list)})).catch((e=>{console.error("Error fetching hourly forecast data:",e),alert("Error fetching hourly forecast data. Please try again.")}))})).catch((e=>{console.error("Error fetching current weather data:",e),alert("Error fetching current weather data. Please try again.")}))}),(e=>{e.code===e.PERMISSION_DENIED&&alert("Geolocation request denied!")}))}))})();